@use "../base/mixin" as mx;

.header {
	display: var(--header-display, grid);
	flex-direction: var(--header-layout, unset);
	justify-content: var(--header-justify);
	align-items: var(--header-alignment);
	padding-inline: var(--header-padding-inline);
	padding-block-start: var(--header-padding-b-s);
	overflow: (--header-overflow, auto);
	margin-inline: var(--header-margin, unset);
	width: var(--header-width);


	&__logo{
		&--link {
			&-logo {
				width: var(--logo-width, 30%);

				&-img {
					width: 100%;
					object-fit: cover;
				}
			}
		}
	}

	&__nav{
		position: var(--nav-position, fixed);
		inset-block-start: 0;
		inset-inline-end: 0;
		width: 3rem;
		height: 3rem;
		place-content: center;
		place-items: center;
		width: var(--nav-width, fit-content);
		flex: var(--nav-basis);
		margin-right: var(--nav-margin-inline-end, 0);


		&__list{
			// --nav-list-gap: 1rem;

			background: rgb(255, 255, 255);
			box-shadow: var(--nav-list-shadow, -5px 0 11px 0 rgb(0 0 0 / 0.2));
			display: var(--nav-list-display);
			flex-direction: var(--nav-list-layout, column);
			flex-wrap: var(--nav-list-wrap, nowrap);
			justify-content: var(--nav-list-justify, flex-start);
			gap: var(--nav-list-gap);
			height: var(--nav-list-height, 100vh);
			list-style: none;
			margin-block: var(--margin-block, 0);
			margin-inline-start: var(--nav-margin-left);
			padding-block-start: var(--nav-list-padding-block-start);
			padding-inline-end: var(--nav-list-padding-inline-end);
			padding: var(--nav-list-padding, 1rem);
			position: var(--nav-list-position, fixed);
			inset-block-start: 0;
			inset-inline-end: 0;
			overflow: var(--nav-list-overflow, scroll);
			width: var(--nav-list-width, min(60%, 100vw));
			visibility: var(--nav-list-visibility, visible);


			&--item{
				--border: 2px solid #ececec;
				position: relative;
				height: auto;
				display: flex;
				flex-direction: column;
				align-items: flex-start;
				width: var(--nav-item-width, inherit);
				border-bottom:var(--border);

				&-link{
					border-block-end: var(--border-block-end, 3px solid var(--border-color));
					color: var(--nav-link-text-color, var(--secondary-color));
					font-size: var(--nav-items-font-size);
					font-weight: var(--font-regular);
					padding: var(--nav-list-item-padding, 0.1rem);
					text-decoration: var(--underline, none);
					text-transform: var(--text-transform, uppercase);

					&[aria-current='page'] {
						// --text-color: var(--color-highlight);
						--text-color: #fff;
						--border-color: var(--text-color);
					}
				}

				.sub__menu {
					top: 2rem;
					padding: 0;

					&--item {
						list-style-type: none;
					}
				}

				.dropdown--content {
					overflow: hidden;
					transition: all 0.25s ease-in-out;
					height: 0;
				}
			}
		}
	}
}

/////////////////////////////////////////////////////////////////////////////////////////////
// MEDIA QUERIES
@media (min-width: 48em) {
	.header {
		--header-display: flex;
		--header-alignment: center;
		--header-layout: column;
		--header-gap: 2rem;
		--herder-overflow: hidden;
		--header-margin: auto;
		--header-width: var(--preferred-width);

		&__top,
		&__reviews,
		&__main{
			@include mx.defaultLayout();
		}

		&__main {
			transform: translateY(-6rem);
		}

		&__logo{
			&--link{
				&-logo {
					--logo-width: 100%
				}
			}
		}

		&__nav{
			--nav-button-display: none;
			--nav-position: static;
			--nav-margin-inline-end: 3rem;
			--nav-basis: 1;


			&__list{
				--nav-list-visibility: visible;
				--nav-list-layout: row;
				--nav-list-display: flex;
				--nav-list-wrap: wrap;
				--nav-list-justify: flex-end;
				--nav-margin-left: auto;
				--nav-list-position: static;
				--nav-list-padding-block-start: 2rem;
				--nav-list-padding-inline-end: 2.5rem;
				--nav-list-height: auto;
				--nav-list-width: 90%;
				--nav-list-shadow: none;
				--margin-block: 0;
				--nav-list-overflow: hidden;
				--nav-list-transition: all 0.2s ease-out;

				&--item {
					--border: transparent;
					--nav-item-width: auto;
					height: 7rem;
					list-style-type: none;
					padding-block-start: 1.5rem;
					padding-inline: var(--nav-items-space);
					transition: var(--transition-fast);

					@include mx.on-hover() {
						width: initial;
						height: auto;
						position: relative;
						background-color: var(--primary-color);

						.dropdown--content {
							position: fixed;
							inset: 79% 0 auto 0;
							display: inline-table;
							padding: 3rem 0 3rem 23rem;
							perspective: 1000px;
							width: 100%;
							margin-inline: auto;
							animation: growDown 300ms ease-in-out forwards;
							transform-origin: top center;
							z-index: 1;
							background-color: var(--clr-white);
							border-top: 5px solid var(--primary-color);
							align-items: flex-start;
							height: 27rem;

							.sub__menu {
								width: 100%;
								display: flex;
								padding: 0;
								height: inherit;
								flex-wrap: wrap;
								flex-direction: column;
								column-gap: 2rem;

								&--item {
									width: 25%;
									padding-block: 0 1.5rem;
									list-style-type: none;
									min-width: 25%;

									&::before {
										content: "Â· ";
									}

									&-link {
										color: var(--primary-color);
										font-size: 1.5rem;
										text-transform: uppercase;
									}

									&-last {
										align-items: center;
										display: flex;
										flex-direction: column;
										margin-left: auto;
										padding: 0;
										min-width: 30%;

										&-text {
											text-transform: uppercase;
											font-size: 1.8rem;
    										font-weight: 700;
										}
									}
								}
							}
						}

						&-link {
							--nav-link-text-color: #cecece;

							.active-page {
								--border-color: transparent;
							}
						}
					}

					&:where(:hover) {
						a {
							color: beige;
						}
					}

					&-link{
						--nav-link-text-color: var(--secondary-color);
						--nav-list-item-padding: 0.1rem
						--underline: none;
						--border-block-end: 3px solid var(--border-color, transparent);
						--text-transform: uppercase;

						&[aria-current='page'] {
							--nav-link-text-color: #fff;
							--border-color: transparent;
						}
					}

					&:has([aria-current='page'].active-page){
						background-color: var(--primary-color);
					}
				}
			}
		}
	}
}


[aria-expanded='false'] + ul.header__nav__list {
	visibility: var(--nav-list-visibility, hidden);

	@media only screen and (max-width: 50em){
		transform: var(--van-list-transform, translateX(100%));
	}
}

@media (prefers-reduced-motion: no-preference) {
	.header__nav__list {
		transition: transform 0.6s var(--transition-animation),
		visibility 0.3s linear;
	}
}


.header__nav__list--item.dropdown {

	@media (max-width: 48em) {
		display: flex;
		flex-direction: column;
		align-items: flex-start;

		.dropdown--content{
			height: auto;
		}

		.sub__menu {
			display: flex;
			flex-direction: column;
			padding: 0;

			&-item {
				cursor: pointer;
			}
		}
	}
}

